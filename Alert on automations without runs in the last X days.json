{"blocks":[{"id":"5997EDE4-CCEA-4CD8-97F5-3B59F60CB4F7","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"6B471AA0-F2C6-4615-8835-EF08577BDF8D","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":386,"y":-187},{"id":"B4110725-C0FF-4591-84B1-E6B88D042744","type":"EndpointBlock","disabled":false,"name":"listMyAutomations","displayName":"Qlik Cloud Services - List My Automations","comment":"","childId":"49A7354E-92F0-43CA-8766-0D05FDEFFA6C","inputs":[{"id":"4e5bb3c0-f914-11ec-8978-69f3c0b58cf8","value":null,"type":"select","structure":[]},{"id":"774e7600-fcf2-11ec-9bcb-09b62137d6df","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":100,"y":3402,"loopBlockId":"74455591-3A2E-489A-BC68-AF265E466118","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"4e440680-f914-11ec-b9a9-99fc50394cf5","endpoint_role":"list"},{"id":"75F859C1-59B2-495D-9584-F5B67E7016A9","type":"EndpointBlock","disabled":false,"name":"listAutomationRuns","displayName":"Qlik Cloud Services - List Automation Runs","comment":"","childId":"5FC2C1B7-79E9-425E-9D2A-22717C28372F","inputs":[{"id":"b41c66c0-cc64-11ec-9e0f-27d96671c4e5","value":"{$.listMyAutomations.item.resourceId}","type":"string","structure":[]},{"id":"8a94c250-cc64-11ec-8eaa-ebb71383dd30","value":null,"type":"string","structure":[]},{"id":"7d8eb800-cc65-11ec-aa62-05f2c00cdc02","value":null,"type":"string","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":220,"y":3633,"loopBlockId":"334E57A1-720D-4A6B-B599-85329BF31D2A","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"8a8097f0-cc64-11ec-9cc7-c3ac522ab035","endpoint_role":"list"},{"id":"74455591-3A2E-489A-BC68-AF265E466118","type":"VariableBlock","disabled":false,"name":"lastStartTime","displayName":"Variable - lastStartTime","comment":"","childId":"75F859C1-59B2-495D-9584-F5B67E7016A9","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":513,"y":391,"variableGuid":"BF3BD5DC-21EF-483F-81A7-DF3B79040D5A","operations":[{"id":"set_value","key":"753A4396-847B-412C-A451-384D1F6ACA4B","name":"Set value of { variable }","value":"2000-01-01T00:00:00.000000Z"}]},{"id":"334E57A1-720D-4A6B-B599-85329BF31D2A","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"Searching the last start time an automation was run.","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.listAutomationRuns.item.startTime}","input2":"{$.lastStartTime}","operator":">"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":375,"y":631,"childTrueId":"39CD1B88-FE9C-4D9B-82EE-D9023381FF38","childFalseId":null},{"id":"39CD1B88-FE9C-4D9B-82EE-D9023381FF38","type":"VariableBlock","disabled":false,"name":"lastStartTime","displayName":"Variable - lastStartTime","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":426,"y":764,"variableGuid":"BF3BD5DC-21EF-483F-81A7-DF3B79040D5A","operations":[{"id":"set_value","key":"C9638ECE-3DC6-4F1E-BCC8-F65EFEF08177","name":"Set value of { variable }","value":"{$.listAutomationRuns.item.startTime}"}]},{"id":"5FC2C1B7-79E9-425E-9D2A-22717C28372F","type":"IfElseBlock","disabled":false,"name":"condition2","displayName":"Condition 2","comment":"Does the automation have a run time greater than configured time?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{date: 'today - { $.DaysBack } day'}","input2":"{$.lastStartTime}","operator":">"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":234,"y":1014,"childTrueId":"8509A001-1275-49BA-B82D-4F541F4229E1","childFalseId":null},{"id":"6B471AA0-F2C6-4615-8835-EF08577BDF8D","type":"VariableBlock","disabled":false,"name":"LastDaysToCheck","displayName":"Variable - LastDaysToCheck","comment":"Configuration (Integer) The number of days to go back to alert the users that their automations haven't run.","childId":"58B80D38-9ED0-4175-B072-D718C1CDDBA8","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":104,"y":169,"variableGuid":"6F873780-0240-4E3A-B3AB-9C70A7327023","operations":[{"id":"set_value","key":"E6EA03A8-CDA0-4518-A988-2B7AD8A92DE2","name":"Set value of { variable }","value":"10"}]},{"id":"58B80D38-9ED0-4175-B072-D718C1CDDBA8","type":"VariableBlock","disabled":false,"name":"EmailTenantAdmins","displayName":"Variable - EmailTenantAdmins","comment":"Configuration (Yes/No) Email all tenant admins the list of issues found with automanion runs.","childId":"3ABB9130-EE45-4516-B320-D7C9C9128C84","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":100,"y":460,"variableGuid":"8DA089D5-5437-41F3-BBA3-78D4D601CA66","operations":[{"id":"set_value","key":"A40B5F95-549A-48FA-8390-A5C92FA490B7","name":"Set value of { variable }","value":"no"}]},{"id":"3ABB9130-EE45-4516-B320-D7C9C9128C84","type":"VariableBlock","disabled":false,"name":"DebugModeOn","displayName":"Variable - DebugModeOn","comment":"Configuration (Yes/No) This automation will find the first match for a user with apps meeting the criteria and email \"DebugEmailAddress\".","childId":"87051802-094B-4733-9EFA-6C217227A3BD","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":386,"y":173,"variableGuid":"08D29203-BDDE-4A5D-A02D-D4A32DA31F07","operations":[{"id":"set_value","key":"FACC9991-9D02-4A40-AE31-E5EE022EC92F","name":"Set value of { variable }","value":"No"}]},{"id":"87051802-094B-4733-9EFA-6C217227A3BD","type":"VariableBlock","disabled":false,"name":"DebugEmailAddress","displayName":"Variable - DebugEmailAddress","comment":"Configuration (email address) The email of the user to send the debug email to, if enabled.","childId":"5A2056E2-8FD9-4971-8F09-C1EBC03E6289","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":118,"y":662,"variableGuid":"60080B8E-1655-48D3-897D-181EC9416D19","operations":[{"id":"set_value","key":"E49831AF-15D8-4271-8E28-6F1C25C355B3","name":"Set value of { variable }","value":"veg@qlik.com"}]},{"id":"5A2056E2-8FD9-4971-8F09-C1EBC03E6289","type":"IfElseBlock","disabled":false,"name":"condition17","displayName":"Condition 17","comment":"Is the \"LastDaysToCheck\" variable not greater than or equal to 1?","childId":"B02E0309-FB8B-4EFC-9345-F9234E7DEF15","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.LastDaysToCheck}","input2":"1","operator":"<"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":100,"y":1180,"childTrueId":"F2E2439C-434A-40BB-9364-3EED63599354","childFalseId":"B77D9E23-FF6D-4336-A768-48BC24D94C6D"},{"id":"F2E2439C-434A-40BB-9364-3EED63599354","type":"ErrorBlock","disabled":false,"name":"error","displayName":"Error","comment":"Alert the user and halt the automation.","childId":null,"inputs":[{"id":"message","value":"Variable \"LastDaysTocheck\" must be a number greater than or equal to 1. Currently, the value is set to '{$.LastDaysToCheck}'.","type":"string","structure":[]},{"id":"action","value":"stop","type":"select","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":188,"y":667},{"id":"B77D9E23-FF6D-4336-A768-48BC24D94C6D","type":"VariableBlock","disabled":false,"name":"DaysBack","displayName":"Variable - DaysBack","comment":"Round the variable to the nearest integer, if a float was input.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":222,"y":954,"variableGuid":"58E368BB-060E-4B4E-B308-09D43AA794D8","operations":[{"id":"set_value","key":"CE35695C-41A0-497F-BC3F-B9B985BBC900","name":"Set value of { variable }","value":"{round: {$.LastDaysToCheck}}"}]},{"id":"B02E0309-FB8B-4EFC-9345-F9234E7DEF15","type":"IfElseBlock","disabled":false,"name":"condition7","displayName":"Condition 7","comment":"Is the \"EmailTenantAdmins\" variable not set to either 'Yes' or 'No'?","childId":"273C6DEA-9025-40D5-A46D-1D6F14D01869","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{explode: 'YES,NO', ','}","input2":"{uppercase: {$.EmailTenantAdmins}}","operator":"notInList"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":91,"y":1342,"childTrueId":"C9949957-B75A-4A99-9264-0C989259576D","childFalseId":null},{"id":"273C6DEA-9025-40D5-A46D-1D6F14D01869","type":"IfElseBlock","disabled":false,"name":"condition8","displayName":"Condition 8","comment":"Is the \"DebugModeOn\" variable not set to either 'Yes' or 'No'?","childId":"EA69992E-C57F-4134-85E5-B44E9B02BD78","inputs":[{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"{explode: 'YES,NO', ','}","input2":"{uppercase: {$.DebugModeOn}}","operator":"notInList"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":100,"y":1605,"childTrueId":"588CCE67-EB5C-43A3-AE75-60972EFCD667","childFalseId":"19EA61B9-09D3-45B8-9256-22E8D8254514"},{"id":"588CCE67-EB5C-43A3-AE75-60972EFCD667","type":"ErrorBlock","disabled":false,"name":"error4","displayName":"Error 4","comment":"Alert the user and halt the automation.","childId":null,"inputs":[{"id":"message","value":"The variable \"DebugMode\" must be set to either 'Yes' or 'No'. Currently, the value is set to '{$.DebugModeOn}'.","type":"string","structure":[]},{"id":"action","value":"stop","type":"select","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":210,"y":913},{"id":"19EA61B9-09D3-45B8-9256-22E8D8254514","type":"IfElseBlock","disabled":false,"name":"condition9","displayName":"Condition 9","comment":"Check if debug mode is on.","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.DebugModeOn}","input2":"Yes","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":255,"y":2008,"childTrueId":"760DC7F1-E5EF-4163-A55D-2377636816E2","childFalseId":null},{"id":"760DC7F1-E5EF-4163-A55D-2377636816E2","type":"IfElseBlock","disabled":false,"name":"condition10","displayName":"Condition 10","comment":"Is the email address invalid?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{isemail: {$.DebugEmailAddress}}","input2":null,"operator":"isFalse"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":385,"y":2128,"childTrueId":"28D76FAB-2F3C-4120-BE20-186B899FABE0","childFalseId":"D414C80D-22C6-4D58-9E7F-CF369A2C0F1B"},{"id":"28D76FAB-2F3C-4120-BE20-186B899FABE0","type":"ErrorBlock","disabled":false,"name":"error5","displayName":"Error 5","comment":"Alert the user and halt the automation.","childId":null,"inputs":[{"id":"message","value":"The variable \"DebugEmailAddress\" must be a valid email address. Currently, the value is set to '{$.DebugEmailAddress}'.","type":"string","structure":[]},{"id":"action","value":"stop","type":"select","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":494,"y":2205},{"id":"D414C80D-22C6-4D58-9E7F-CF369A2C0F1B","type":"ShowBlock","disabled":false,"name":"output3","displayName":"Output 3","comment":"Log that debug mode is on.","childId":null,"inputs":[{"id":"input","value":"---\r\n**NOTE**\r\n#### Debug mode on! This will only send a single email to: {$.DebugEmailAddress}.\n---\n{linebreak}","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":460,"y":2340},{"id":"C9949957-B75A-4A99-9264-0C989259576D","type":"ErrorBlock","disabled":false,"name":"error6","displayName":"Error 6","comment":"Alert the user and halt the automation.","childId":null,"inputs":[{"id":"message","value":"The variable \"EmailTenantAdmins\" must be set to either 'Yes' or 'No'. Currently, the value is set to '{$.EmailTenantAdmins}'.","type":"string","structure":[]},{"id":"action","value":"stop","type":"select","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":236,"y":660},{"id":"EA69992E-C57F-4134-85E5-B44E9B02BD78","type":"EndpointBlock","disabled":false,"name":"listUsers","displayName":"Qlik Cloud Services - List Users","comment":"Get all users.","childId":"CD17932D-1456-417B-A99D-FD35A924662C","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":103,"y":2489,"loopBlockId":"3F6EC4D0-3E27-4865-91FE-038B4098B6A5","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"53ca52b0-6f83-11eb-b06c-c5bdc3525ce4","endpoint_role":"list"},{"id":"CD17932D-1456-417B-A99D-FD35A924662C","type":"FilterListBlock","disabled":false,"name":"filterList3","displayName":"Filter List 3","comment":"Get list of TenantAdmins.","childId":"4DB732B6-828B-4ED1-8A02-F396E5706EBD","inputs":[{"id":"list","value":"{ $.Users }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"roles","input2":"TenantAdmin","operator":"inList"}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":156,"y":2307,"loopBlockId":null},{"id":"4DB732B6-828B-4ED1-8A02-F396E5706EBD","type":"VariableBlock","disabled":false,"name":"TenantAdminList","displayName":"Variable - TenantAdminList","comment":"Store list of TenantAdmins.","childId":"0FE2CD4E-071A-4037-BF32-053A20983B31","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":835,"y":2576,"variableGuid":"1B9DD752-2947-4E23-9FEA-E2E1C896D118","operations":[{"id":"merge","key":"0995A85A-A3D0-45B1-BF8A-6CD7C309C052","name":"Merge other list into { variable }","value":"{ $.filterList3 }","allow_duplicates":"no"}]},{"id":"3F6EC4D0-3E27-4865-91FE-038B4098B6A5","type":"VariableBlock","disabled":false,"name":"UserIdHash","displayName":"Variable - UserIdHash","comment":"Hash the User Id (so that it plays well as a JSON key later).","childId":"7110D970-8B61-455A-9379-5801E2CC3621","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":269,"y":1911,"variableGuid":"D9C2138D-0F9F-4930-8AF3-08B5C59A2509","operations":[{"id":"set_value","key":"F28435A4-1C18-4620-B7AF-1842F9BFAE38","name":"Set value of { variable }","value":"{hash: { $.listUsers.item.id }}"}]},{"id":"7110D970-8B61-455A-9379-5801E2CC3621","type":"VariableBlock","disabled":false,"name":"User","displayName":"Variable - User","comment":"Modify the user object so that the Id is now the hashed value, so that it can be properly mapped to the dictionary.","childId":"9A33D7B5-773F-4883-A292-A9A215F4976F","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":402,"y":1989,"variableGuid":"E8FD98A4-DD83-4E7C-9AE4-F4C6055B1C29","operations":[{"id":"empty","key":"E995888C-FEF1-4803-9989-4DFD2173001F","name":"Empty { variable }","value":null},{"id":"set","key":"A0BCFED6-BB7F-409D-94B3-2B3246387E7B","name":"Set { variable } equal to object","value":"{ $.listUsers.item }"},{"id":"remove_key","key":"18852885-399F-40F4-8923-0775F9D1A261","name":"Remove key/value in { variable }","value":null,"remove_key":"id"},{"id":"set_key_value","key":"8FE3574C-70A3-4997-9123-01B4B67D95D8","name":"Set key/values of { variable }","value":[{"key":"id","value":"{ $.UserIdHash }"}]}]},{"id":"9A33D7B5-773F-4883-A292-A9A215F4976F","type":"VariableBlock","disabled":false,"name":"Users","displayName":"Variable - Users","comment":"Add the user to the Users array.","childId":"BF465F91-3747-4BFA-B000-B320DA552D07","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":265,"y":2056,"variableGuid":"16A3097B-49BE-44B7-BCC3-966B730F53E3","operations":[{"id":"add_item","key":"FE00E8FE-EBE4-455F-B60F-0621C7999284","name":"Add item to { variable }","value":"{ $.User }"}]},{"id":"BF465F91-3747-4BFA-B000-B320DA552D07","type":"VariableBlock","disabled":false,"name":"UserIds","displayName":"Variable - UserIds","comment":"Store all User Ids.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":295,"y":2185,"variableGuid":"193DF01A-0D87-49AE-9A9F-5A1C4932BBD9","operations":[{"id":"add_item","key":"70B3CE28-4861-4340-80DA-549A8AD4C18F","name":"Add item to { variable }","value":"{ $.UserIdHash }"}]},{"id":"0FE2CD4E-071A-4037-BF32-053A20983B31","type":"VariableBlock","disabled":false,"name":"StaleAutomationsList","displayName":"Variable - StaleAutomationsList","comment":"Object to store the automations that haven't run in the last days","childId":"B4110725-C0FF-4591-84B1-E6B88D042744","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":88,"y":3356,"variableGuid":"EC0CB61C-A7BE-4A5C-9CB9-4F17B524D9F1","operations":[{"id":"empty","key":"8B946C9C-3A86-4BB7-839B-DA07F1139155","name":"Empty { variable }","value":null}]},{"id":"8509A001-1275-49BA-B82D-4F541F4229E1","type":"VariableBlock","disabled":false,"name":"StaleAutomationsList","displayName":"Variable - StaleAutomationsList","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":340,"y":5546,"variableGuid":"EC0CB61C-A7BE-4A5C-9CB9-4F17B524D9F1","operations":[{"id":"add_item","key":"DF605D41-8BE6-4EE5-A30B-984BCAE1088A","name":"Add item to { variable }","value":"{$.listMyAutomations.item}"}]},{"id":"49A7354E-92F0-43CA-8766-0D05FDEFFA6C","type":"IfElseBlock","disabled":false,"name":"condition14","displayName":"Condition 14","comment":"Check to see if any automations are found that match the criteria set.","childId":"C9078385-9BD5-4E56-A73A-E353C8E7DC76","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.StaleAutomationsList}","input2":null,"operator":"empty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":104,"y":6792,"childTrueId":"17797218-F393-4E5F-9CD6-438230A52E9A","childFalseId":null},{"id":"C9078385-9BD5-4E56-A73A-E353C8E7DC76","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"","childId":"B1337EF1-AD9B-44B9-8ADD-AD858F70204F","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":100,"y":4711,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"B1337EF1-AD9B-44B9-8ADD-AD858F70204F","type":"VariableBlock","disabled":false,"name":"TenantURL","displayName":"Variable - TenantURL","comment":"Set the base URL of the tenant to build links to assets in the email body.","childId":"B5A8AFAA-A846-48DB-865B-2FA177C3C98B","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":6868,"variableGuid":"7361F3A8-51FA-41DA-941D-ED4F79A90087","operations":[{"id":"set_value","key":"3C16C5B4-4ABC-419B-9341-65E000D62308","name":"Set value of { variable }","value":"https://{ $.getCurrentTenantInfo.hostnames[0] }"}]},{"id":"17797218-F393-4E5F-9CD6-438230A52E9A","type":"ShowBlock","disabled":false,"name":"output 2","displayName":"Output 2","comment":"If no automations were found, log that and stop the automation.","childId":"A963578D-DAC3-4BE4-ADD6-51F575442D0A","inputs":[{"id":"input","value":"{object: '{\"message\":\"Halting...\",\"output\":\"No automations match that criteria! Halting...\"}'}","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":234,"y":4576},{"id":"A963578D-DAC3-4BE4-ADD6-51F575442D0A","type":"StopBlock","disabled":false,"name":"stop","displayName":"Stop","comment":"Stop the automation.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":303,"y":4663},{"id":"A2EB739A-C962-40EF-8F95-A926DC45C322","type":"ForEachBlock","disabled":false,"name":"loop5","displayName":"Loop 5","comment":"For each email recipient","childId":"8651280F-3E0B-4123-AD9E-2E01F0E731B0","inputs":[{"id":"input","value":"{$.deduplicateList2}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":103,"y":9066,"loopBlockId":"319C9833-DF82-4599-866C-DF8A5324B0CE"},{"id":"8651280F-3E0B-4123-AD9E-2E01F0E731B0","type":"ShowBlock","disabled":false,"name":"output4","displayName":"Output 4","comment":"Output Log","childId":null,"inputs":[{"id":"input","value":"{ $.LogOutputList }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":128,"y":9001},{"id":"319C9833-DF82-4599-866C-DF8A5324B0CE","type":"VariableBlock","disabled":false,"name":"EmailBody","displayName":"Variable - EmailBody","comment":"Begin building the email body, including setting the body tag, the \"Hello <User>\" opening, as well as the text before the data table.","childId":"678EC354-E9F8-45F5-8576-272A3CE2A069","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":211,"y":9149,"variableGuid":"51994DED-EFA7-4CA0-9E57-050F4938F94B","operations":[{"id":"empty","key":"B91901B7-072E-4933-BB8F-555767D36B07","name":"Empty { variable }","value":null},{"id":"set_value","key":"322A728A-FBA6-425E-A7DD-1D0E04FC9B0F","name":"Set value of { variable }","value":"<body style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; font-family: 'Nunito', sans-serif; color: #384047;\">"},{"id":"append","key":"7DC266E7-B213-480D-9646-C38E08A878F9","name":"Append to { variable }","value":"<p style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; font-size: .9em; font-weight: 400; padding: 10px 0; margin: 5px auto;\">Hello { $.loop5.item.username }!</p>"},{"id":"append","key":"D0BA2E82-3A87-40F8-95E5-35B2421F8588","name":"Append to { variable }","value":"<p style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; font-size: .9em; font-weight: 400; padding: 10px 0; margin: 5px auto;\">This is an automated email from your Qlik tenant to inform you that there are automations that require your attention</p>"},{"id":"append","key":"07A5011A-EB53-4B56-8E58-4181520679C6","name":"Append to { variable }","value":"<br>"}]},{"id":"1A1FB651-C177-4116-A6C9-3C0F402277D0","type":"VariableBlock","disabled":false,"name":"Columns","displayName":"Variable - Columns","comment":"Define the column names. (Values are referenced in the \"ColumnContent\" block below.)","childId":"3DB89485-1DEA-47CA-95D8-7E38C9CBCBF1","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":339,"y":9478,"variableGuid":"DF3B8C8A-38BC-4367-B79E-E10BF2F1AA83","operations":[{"id":"empty","key":"7A0AA9C6-BCBC-475A-B915-B3FE8FC03770","name":"Empty { variable }","value":null},{"id":"add_item","key":"413983B3-FB4E-4A03-87C1-96ABD05F8339","name":"Add item to { variable }","value":"Name"},{"id":"add_item","key":"36A773F0-3880-4C71-BC17-09268FC61880","name":"Add item to { variable }","value":"Owner"},{"id":"add_item","key":"3A6EA0B3-3DE0-4CBD-89E7-C5EAC96B5D81","name":"Add item to { variable }","value":"Created"}]},{"id":"3DB89485-1DEA-47CA-95D8-7E38C9CBCBF1","type":"ForEachBlock","disabled":false,"name":"loop6","displayName":"Loop 6","comment":"Loop over each column and add them to the table headers.","childId":"8D9E8119-1559-42C7-9BDF-586313338380","inputs":[{"id":"input","value":"{ $.Columns }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":351,"y":9601,"loopBlockId":"1179D82C-0462-411A-99C9-C057C3347151"},{"id":"B5A8AFAA-A846-48DB-865B-2FA177C3C98B","type":"EndpointBlock","disabled":false,"name":"getCurrentUserId","displayName":"Qlik Cloud Services - Get Current User Id","comment":"","childId":"37763F5D-DDC7-4A1B-89F4-85A79301FAF5","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":128,"y":8203,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"6e9dbaa0-c7a4-11ea-9bd3-0da55b4cbed9","endpoint_role":"get"},{"id":"37763F5D-DDC7-4A1B-89F4-85A79301FAF5","type":"VariableBlock","disabled":false,"name":"emailRecipientList","displayName":"Variable - emailRecipientList","comment":"list of users that will receive the result from this automation","childId":"605524BC-497A-4317-A68F-C1BDF97F910A","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":100,"y":7816,"variableGuid":"69691BD5-A252-41A9-9E8A-D7921EC20094","operations":[{"id":"empty","key":"BE266360-00BE-4309-9EFA-CA3937425197","name":"Empty { variable }","value":null}]},{"id":"605524BC-497A-4317-A68F-C1BDF97F910A","type":"IfElseBlock","disabled":false,"name":"condition22","displayName":"Condition 22","comment":"Check if debug mode is on.","childId":"56CCA0AD-6E23-472A-88E3-B175D18588DD","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{uppercase: {$.DebugModeOn}}","input2":"YES","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":97,"y":8559,"childTrueId":"B533EF87-E32F-43AB-8E9E-CF495ECE7EA9","childFalseId":"064F2450-35FC-415F-B5C1-A1D85C4DC5D1"},{"id":"B533EF87-E32F-43AB-8E9E-CF495ECE7EA9","type":"VariableBlock","disabled":false,"name":"emailRecipientList","displayName":"Variable - emailRecipientList","comment":"Add debug email address to email distribution list.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":219,"y":8663,"variableGuid":"69691BD5-A252-41A9-9E8A-D7921EC20094","operations":[{"id":"add_item","key":"E242F7FD-2123-4227-B96C-76134C47EF85","name":"Add item to { variable }","value":"{object: '{\"username\":\"user\",\"email\":\"{$.DebugEmailAddress}\"}'}"}]},{"id":"947555D2-A086-4D07-B8EC-0C98EE846CCD","type":"VariableBlock","disabled":false,"name":"emailRecipientList","displayName":"Variable - emailRecipientList","comment":"","childId":"FF09CCAB-62EF-4A0C-AE22-5363D2E50039","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":198,"y":8804,"variableGuid":"69691BD5-A252-41A9-9E8A-D7921EC20094","operations":[{"id":"add_item","key":"E242F7FD-2123-4227-B96C-76134C47EF85","name":"Add item to { variable }","value":"{object: '{\"username\":\"{ $.filterList[0].name }\",\"email\":\"{$.filterList[0].email}\"}'}"}]},{"id":"064F2450-35FC-415F-B5C1-A1D85C4DC5D1","type":"FilterListBlock","disabled":false,"name":"filterList","displayName":"Filter List","comment":"Get current user","childId":"947555D2-A086-4D07-B8EC-0C98EE846CCD","inputs":[{"id":"list","value":"{$.Users}","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"id","input2":"{hash: {$.getCurrentUserId}}","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":216,"y":8163,"loopBlockId":null},{"id":"FF09CCAB-62EF-4A0C-AE22-5363D2E50039","type":"IfElseBlock","disabled":false,"name":"condition23","displayName":"Condition 23","comment":"Should tenant admins be included?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{uppercase: {$.EmailTenantAdmins}}","input2":"YES","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":230,"y":9094,"childTrueId":"B7AEE61D-9E7A-43E0-A23D-79A7F493A584","childFalseId":null},{"id":"B7AEE61D-9E7A-43E0-A23D-79A7F493A584","type":"ForEachBlock","disabled":false,"name":"loop4","displayName":"Loop 4","comment":"Loop over tenant admins.","childId":null,"inputs":[{"id":"input","value":"{$.TenantAdminList}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":317,"y":9204,"loopBlockId":"BE30C695-AD60-43B6-AF74-B999393A4B3D"},{"id":"BE30C695-AD60-43B6-AF74-B999393A4B3D","type":"VariableBlock","disabled":false,"name":"emailRecipientList","displayName":"Variable - emailRecipientList","comment":"Add tenant admins to email distribution list.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":468,"y":9265,"variableGuid":"69691BD5-A252-41A9-9E8A-D7921EC20094","operations":[{"id":"add_item","key":"6249D8B4-9F07-4D66-9BD4-64B011061DB5","name":"Add item to { variable }","value":"{object: '{\"username\":\"{ $.loop4.item.name }\",\"email\":\"{$.loop4.item.email}\"}'}"}]},{"id":"56CCA0AD-6E23-472A-88E3-B175D18588DD","type":"DeduplicateListBlock","disabled":false,"name":"deduplicateList2","displayName":"Deduplicate List 2","comment":"","childId":"A2EB739A-C962-40EF-8F95-A926DC45C322","inputs":[{"id":"list","value":"{$.emailRecipientList}","type":"string","structure":[]},{"id":"key","value":"email","type":"field","structure":[]}],"settings":[{"id":"case_insensitive","value":null,"type":"checkbox","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":112,"y":9548,"loopBlockId":null},{"id":"678EC354-E9F8-45F5-8576-272A3CE2A069","type":"VariableBlock","disabled":false,"name":"EmailTable","displayName":"Variable - EmailTable","comment":"Begin building the data table object, prior to the table header values.","childId":"1A1FB651-C177-4116-A6C9-3C0F402277D0","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":218,"y":6421,"variableGuid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","operations":[{"id":"empty","key":"55355203-35A6-4172-8B84-B54E9D1964B0","name":"Empty { variable }","value":null},{"id":"append","key":"603AA1DA-AE29-436F-B5D0-2D189028B681","name":"Append to { variable }","value":"<div style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; font-size: 1.4em; font-weight: 400; padding: 10px 0; margin: 5px auto;\">{count: { $.StaleAutomationsList }} automations not run in the past {$.DaysBack} days</div>"},{"id":"append","key":"E0C752EA-9ACC-46ED-A5BD-A9EC05109C5B","name":"Append to { variable }","value":"<table style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; max-width: 1200px; margin: 5px auto;\">"},{"id":"append","key":"BC52B3EF-7B2E-4422-B502-8D9F9522A732","name":"Append to { variable }","value":"<thead style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;\"> <tr style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; background: #f4f7f8; b order-bottom: 1px solid #FFF; margin-bottom: 5px;\">"}]},{"id":"1179D82C-0462-411A-99C9-C057C3347151","type":"VariableBlock","disabled":false,"name":"EmailTable","displayName":"Variable - EmailTable","comment":"Add the Column Name to the header.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":454,"y":9713,"variableGuid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","operations":[{"id":"append","key":"14E0963F-3A4B-4823-87AB-8356312BDE64","name":"Append to { variable }","value":"<th scope=\"col\" style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; text-align: left; padding: 5px; font-weight: 400; background: #009845; color: #FFF;\" align=\"left\">"},{"id":"append","key":"6E9E2B3C-8812-4923-B113-2AB3F1602EA0","name":"Append to { variable }","value":"{$.loop6.item}"},{"id":"append","key":"4CB35487-359F-4E4E-9BD2-7D9B882236D9","name":"Append to { variable }","value":"</th>"}]},{"id":"8D9E8119-1559-42C7-9BDF-586313338380","type":"VariableBlock","disabled":false,"name":"EmailTable","displayName":"Variable - EmailTable","comment":"Close out the table header and begin the table body.","childId":"5C165B21-1315-4375-A7F5-8F7332AFAEEA","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":360,"y":9870,"variableGuid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","operations":[{"id":"append","key":"058D5A3A-8C14-4977-A852-0F23D2B41B93","name":"Append to { variable }","value":"</tr> </thead>"},{"id":"append","key":"06C46A77-65FA-4286-B195-3CA063964F4A","name":"Append to { variable }","value":"<tbody style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;\">"}]},{"id":"0E56A6AA-8F2C-4362-BCA7-9BF00FB38892","type":"VariableBlock","disabled":false,"name":"UserName","displayName":"Variable - UserName","comment":"Store the user name.","childId":"DB0A1ECF-5E9F-45B9-97B3-4B70E3687D84","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1228,"y":10292,"variableGuid":"0CCE25BA-44AE-4878-A65B-224F33E3C513","operations":[{"id":"set_value","key":"0EF722E6-1F47-4C72-878F-35B209B77831","name":"Set value of { variable }","value":"{ $.lookupItemInList.name }"}]},{"id":"289929B6-FCF5-4AE9-B8AC-5AA6065A12EC","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList","displayName":"Lookup Item In List","comment":"Lookup that user by the hashed Id.","childId":"0E56A6AA-8F2C-4362-BCA7-9BF00FB38892","inputs":[{"id":"list","value":"{ $.Users }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"id","input2":"{hash: { $.loop10.item.ownerId}}","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":461,"y":10119},{"id":"F4F373F2-C1E5-44CE-94A5-266BD0F4BC60","type":"VariableBlock","disabled":false,"name":"EmailTable","displayName":"Variable - EmailTable","comment":"Add the table data with the column value.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1321,"y":11483,"variableGuid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","operations":[{"id":"append","key":"BA74D87F-4AA2-4016-92BF-4204415D9FE9","name":"Append to { variable }","value":"<td scope=\"row\" style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; text-align: left; padding: 5px; font-weight: 300;\" align=\"left\">"},{"id":"append","key":"F6700A7B-85F3-4425-BDD8-03B2C5603520","name":"Append to { variable }","value":"{$.ColumnContent.'{$.loop7.item}'}"},{"id":"append","key":"9A510630-356E-48AE-A54E-5C7A6EE7F175","name":"Append to { variable }","value":"</td>"}]},{"id":"586DD090-41D2-4711-8055-CED94118C655","type":"VariableBlock","disabled":false,"name":"EmailTable","displayName":"Variable - EmailTable","comment":"Close the table row.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1127,"y":11644,"variableGuid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","operations":[{"id":"append","key":"EDDAECB7-498D-491E-94D2-14C4BC81729F","name":"Append to { variable }","value":"</tr>"}]},{"id":"FD4EF607-8909-4D8C-8B62-A23CC5B3FFE5","type":"ForEachBlock","disabled":false,"name":"loop7","displayName":"Loop 7","comment":"Loop over each column and add the value to the table.","childId":"586DD090-41D2-4711-8055-CED94118C655","inputs":[{"id":"input","value":"{ $.Columns }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1321,"y":11372,"loopBlockId":"F4F373F2-C1E5-44CE-94A5-266BD0F4BC60"},{"id":"3CBF3C79-49B3-4224-9992-52592D025DB2","type":"VariableBlock","disabled":false,"name":"ColumnContent","displayName":"Variable - ColumnContent","comment":"Column names within this block must match those within the \"Columns\" block above.","childId":"FD4EF607-8909-4D8C-8B62-A23CC5B3FFE5","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":460,"y":10741,"variableGuid":"05F3C8CB-2521-4A25-AA03-BB8B025EFC6D","operations":[{"id":"empty","key":"C3AFC89B-07C1-490E-8276-D3394302E117","name":"Empty { variable }","value":null},{"id":"set_key_value","key":"D9B10F05-C325-4BBD-A212-6A49A005B011","name":"Set key/values of { variable }","value":[{"key":"Name","value":"{ $.loop10.item.name }"},{"key":"Owner","value":"{ $.UserName }"},{"key":"Created","value":"{ $.created }"}]}]},{"id":"40C259B3-9CDC-45FF-9403-73FF9A8190C0","type":"VariableBlock","disabled":false,"name":"created","displayName":"Variable - created","comment":"Store the automation creation date","childId":"3CBF3C79-49B3-4224-9992-52592D025DB2","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":460,"y":10621,"variableGuid":"5FE1BE0B-FB0F-49F6-AD7C-532F0A6BC7DC","operations":[{"id":"set_value","key":"B050C34F-000F-4DEA-8C2A-232CAB63B3E0","name":"Set value of { variable }","value":"{text: {date: '{ $.loop10.item.createdAt}','m-d-y'}}"}]},{"id":"DB0A1ECF-5E9F-45B9-97B3-4B70E3687D84","type":"VariableBlock","disabled":false,"name":"EmailTable","displayName":"Variable - EmailTable","comment":"Build the data table row.","childId":"40C259B3-9CDC-45FF-9403-73FF9A8190C0","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":460,"y":10671,"variableGuid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","operations":[{"id":"append","key":"5317CC1C-70E4-4BF0-AA69-FC5D0C5B4A96","name":"Append to { variable }","value":"<tr style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; background: #f4f7f8; border-bottom: 1px solid #FFF; margin-bottom: 5px;\">"}]},{"id":"5C165B21-1315-4375-A7F5-8F7332AFAEEA","type":"ForEachBlock","disabled":false,"name":"loop10","displayName":"Loop 10","comment":"For each stale automation, sorted by name.","childId":"65EC38E0-0907-4E91-8722-D136048C3A71","inputs":[{"id":"input","value":"{ sort: { $.StaleAutomationsList }, \"name\" }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":329,"y":9999,"loopBlockId":"289929B6-FCF5-4AE9-B8AC-5AA6065A12EC"},{"id":"EC08E1A4-ECAE-42DF-8D2F-3FE82FFD88D5","type":"VariableBlock","disabled":false,"name":"EmailBody","displayName":"Variable - EmailBody","comment":"Add the data table HTML.","childId":"C2412159-E1A6-4C62-9B96-764DDFCB2E57","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":340,"y":11294,"variableGuid":"51994DED-EFA7-4CA0-9E57-050F4938F94B","operations":[{"id":"append","key":"A8AA8B59-ED90-47F2-831E-59C707BF7B39","name":"Append to { variable }","value":"{ $.EmailTable }"},{"id":"append","key":"8342EEE2-DB19-4750-9A79-3083F3462161","name":"Append to { variable }","value":"<br>"}]},{"id":"65EC38E0-0907-4E91-8722-D136048C3A71","type":"VariableBlock","disabled":false,"name":"EmailTable","displayName":"Variable - EmailTable","comment":"Close out the data table HTML.","childId":"EC08E1A4-ECAE-42DF-8D2F-3FE82FFD88D5","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":336,"y":11119,"variableGuid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","operations":[{"id":"append","key":"3C47EBFE-378F-4594-A96B-BC0B5BB387DD","name":"Append to { variable }","value":"</tbody>"},{"id":"append","key":"982D8DCA-1564-4927-8328-45DD1DBF3B1C","name":"Append to { variable }","value":"<tfoot style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;\"> <tr style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; border-bottom: 1px solid #FFF; margin-bottom: 5px; background: none;\"> <td colspan=\"3\" style=\"-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; text-align: left; font-weight: 300; padding: 10px 2px; font-size: 0.8em; font-style: italic; color: #8a97a0;\" align=\"left\">Data is updated weekly.</td> </tr> </tfoot>"},{"id":"append","key":"871AA5F7-2DBC-4646-8339-F99D955249B1","name":"Append to { variable }","value":"</table>"}]},{"id":"C2412159-E1A6-4C62-9B96-764DDFCB2E57","type":"VariableBlock","disabled":false,"name":"EmailBody","displayName":"Variable - EmailBody","comment":"Add the data table and email footer HTML.","childId":"D9366D05-15E2-4587-A1C2-EA608F4832AB","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":220,"y":8679,"variableGuid":"51994DED-EFA7-4CA0-9E57-050F4938F94B","operations":[{"id":"append","key":"E333D268-CF3E-44B4-AAB1-E6781EB61776","name":"Append to { variable }","value":"<div style=\"text-align: center;\"><img src=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAgAEkDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAABggAAQIFBwQJ/8QAOhAAAQIFAwIDAwgLAQAAAAAAAQIDBAUGBxEACCESMRMiQRRRdhUWFyM3UnKzCTIzNDZTVmFxk7HT/8QAGwEBAAMBAQEBAAAAAAAAAAAAAAECBQcEBgP/xAAqEQACAQMCBQMEAwAAAAAAAAAAAQIDBBEFMQYSEyFBUXGRFCJhsYGhwf/aAAwDAQACEQMRAD8A+gl976yOydPtRLsGuaz2YkolkqZVhbyshJWogEpbBUkE4JJUlI5PH43FboQ5sZMLiHW1oVn9TyOcm0kl6vbL8L9vsjkMvtvvBu40mf1ldb6PoWJHWxLJYhaHmUnsFJbUlQ/wt1Sh6gdteNUrqt905cp8jS0rirW117u5+nT2jHKa98NP5k364MZhQW8OzLKqgpS5guNL4X6yJlkxQtyIdQOT0pcKlnj0bdCiewPbR07qh90ZcyK1dN4q0Fde2uPqIreMstv2zl/Es/hnZLF3ypy+FNOTSWsqgJrL1BmaSx1WXIZw9iDx1IVg4VgdiCAQdeq3uI3EcrfyfW8O8Q2/EFu6lNcs49pRe6f+p+GAm6S4ta0PWto5bSk/fl0NUFRexzJttKCIlnxoZPQrqBwMLWOMd9epLszfYW3zlW4CZTGk12Snstl8KxHKVPExQRlxrKOgnrSSUAB3qSnCjlOM+kLHkME921xK0oB+3SaPn78sE4qJEHHBpKD47JKMoPUDxye2NSlkMYXVSSaAmgFHtnL0Xh3n17W8+BiIS3ATKpWws5Sy8FLaCgPxNxK/xLB9Bqz2KtKW43GqliaAVOp5ezaDefTM5kKPZpZcaFchplDN+VC4kkpKgO3LgYWT3yV+/WdNdG6TjtI5pd01ofFtGtQ7QuE1Jfnb98r98+pnvP8AtDsV8Vj8+E1px2Z0phjubuvW1tJ9bWBpGYswrNST9MBMQ5Dod8RkrZGAVA9JwtXI550SyGB++f8AebUfFbf/AFvSIYa393KQ1uIpm3lvpaamuJNsNQUrYSXEwqlDyrfCec48wRwSOSUp5MJZDYd2hlV05bSrb136phpvP4rDjrMJCtMsQQx+ySUJBcV95R4zwkYGVHjwSHGoAo1tJgzZnedXlF1Cv2WCuP0zSVRDnlQ++tanUoBPHKnIlse9SAB3GrPuiPI3Oqkk0AqtTx7V3d59MyWQqERLbcwrkTMohHKURAJJSD24cLCCO+Qv7us6b610lHaJzW7qrW+LaNGh3hbpuT/Pp88q98+he8/7Q7FfFY/PhNacdmdJZe9j+KrL/FifzIfSIZ4f0grMyiZXbmHkzwZmDtQKRCOE4CHilIQrPOMKwdIhmv2UfMqnKpqSk65lcVA3iRFPGPfm7ocei2Seo+zrP9vMvBJWCF9Sk8ISCHG1UkmgOU7gdv8AT19qeYh4iLXKp/KlF6UzZlOVw6+/QrGCpskAkAgggEH0Mp4IaONy+5m8+zTKaerS0v0jwcL9XDzWVqW4++gcAqU0lSjx6raSs9yT31OEx3Ljrh70bzp+QaQtai2sBEEJiJnM1LQ+0j16S4lKhx9xoq9xGjUcdys49SLi/P8AH9nttFa27e2u40TLZfTyayo+pUMrjpnBpbaioR5OQVFLi+tSUqUry9SspIIPVlJzKVKpa1WorMX8nOtI0jUeFdTnC3p9W2q4zJY5o++Wm8Z7+q7rDygp3QW2revK0tLNKSkLkwhadqH2yZuIdbQIdnxYZXWQtQJ4bWcJyeNaaeDo7L3UW2rev6gtdGUhIXJizIaiTGzFaHW0eAz1snrPWoZ4QrgZPGieAybsrbVvcN+3a6NkLkyEmqJEbHFDraPBZBRlZ61DPY8DJ0TwGbXcbt5auvBw1X0dGfIlfyDD0pmjSy2XSg9SWXFDnGf1Vd0k+4kGE8Bo39oavuzMqEK7rW6i5bU0sCW3UsvQ6kTIfzWuhZShfHmQopGeQcHAPHgkMvnBNf6Omv8Ash//AE1AP//Z\"><p>{$.TenantURL}</p></div>"},{"id":"append","key":"CEBE6C04-6838-4C2D-9657-10BFDDD83B18","name":"Append to { variable }","value":"</body>"}]},{"id":"D9366D05-15E2-4587-A1C2-EA608F4832AB","type":"VariableBlock","disabled":false,"name":"LogOutputList","displayName":"Variable - LogOutputList","comment":"Add to output log.","childId":"1D2F3A65-5DB2-4151-ADEB-C299EF0261F8","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":340,"y":8411,"variableGuid":"7F49AD5F-5A98-428C-9031-0581BD947C09","operations":[{"id":"add_item","key":"67291B3A-9C24-4D80-9013-625DA8A1265C","name":"Add item to { variable }","value":"{object: '{\"message\":\"Sending an email to\",\"output\":\"{ $.loop5.item.email }\"}'}"}]},{"id":"1D2F3A65-5DB2-4151-ADEB-C299EF0261F8","type":"EndpointBlock","disabled":false,"name":"sendHtmlMessage","displayName":"Microsoft Teams - Send Html Message","comment":"","childId":null,"inputs":[{"id":"bcb8e600-d3ee-11eb-ba9f-dfa3f348c5e5","value":"7264bde2-cd80-4660-8b4d-ef3881321e5e","type":"string","displayValue":"Qlik France Platform","structure":[]},{"id":"bcc940a0-d3ee-11eb-af2d-43ff9170b916","value":"19:9fb1f2036f894a83a36a4d4ebb4a3f9f@thread.skype","type":"string","displayValue":"Platform","structure":[]},{"id":"bcd82fe0-d3ee-11eb-a0c2-2b8aa02accfc","value":"{$.EmailBody}","type":"longtext","structure":[]}],"settings":[{"id":"datasource","value":"7e3bfabf-c52f-4ea9-a639-e6963e4def4c","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":127,"y":8064,"datasourcetype_guid":"0d87af8f-27c0-11ea-921c-022e6b5ea1e2","endpoint_guid":"bc7b7d80-d3ee-11eb-a0a1-77b7ef364bf9","endpoint_role":"create"}],"variables":[{"guid":"BF3BD5DC-21EF-483F-81A7-DF3B79040D5A","name":"lastStartTime","type":"string"},{"guid":"E7C8574F-F424-4382-87C8-45A7F67714DE","name":"errorsInLastDays","type":"string"},{"guid":"339C0F3D-6D27-4715-B184-40DC5669BB96","name":"wonkyConnection","type":"string"},{"guid":"6B184489-1267-40D5-B53F-957780DCF7E3","name":"blockedConnection","type":"string"},{"guid":"6F873780-0240-4E3A-B3AB-9C70A7327023","name":"LastDaysToCheck","type":"number"},{"guid":"8DA089D5-5437-41F3-BBA3-78D4D601CA66","name":"EmailTenantAdmins","type":"string"},{"guid":"08D29203-BDDE-4A5D-A02D-D4A32DA31F07","name":"DebugModeOn","type":"string"},{"guid":"60080B8E-1655-48D3-897D-181EC9416D19","name":"DebugEmailAddress","type":"string"},{"guid":"956375C3-AD54-443F-8C6D-FD74B52CD717","name":"CriteriaToCheck","type":"string"},{"guid":"58E368BB-060E-4B4E-B308-09D43AA794D8","name":"DaysBack","type":"number"},{"guid":"1B9DD752-2947-4E23-9FEA-E2E1C896D118","name":"TenantAdminList","type":"list"},{"guid":"193DF01A-0D87-49AE-9A9F-5A1C4932BBD9","name":"UserIds","type":"list"},{"guid":"16A3097B-49BE-44B7-BCC3-966B730F53E3","name":"Users","type":"list"},{"guid":"E8FD98A4-DD83-4E7C-9AE4-F4C6055B1C29","name":"User","type":"object"},{"guid":"D9C2138D-0F9F-4930-8AF3-08B5C59A2509","name":"UserIdHash","type":"string"},{"guid":"EC0CB61C-A7BE-4A5C-9CB9-4F17B524D9F1","name":"StaleAutomationsList","type":"list"},{"guid":"BD16CA81-C74F-43B7-9609-FC9D5E4D5AF5","name":"FailedAutomationsList","type":"list"},{"guid":"4B13F47A-D461-4FBD-B6D5-30E0235CA287","name":"BlockedAutomationsList","type":"list"},{"guid":"7361F3A8-51FA-41DA-941D-ED4F79A90087","name":"TenantURL","type":"string"},{"guid":"390BEF4F-3B0E-46B0-9C82-B7719CD85B2C","name":"noRunCheck","type":"string"},{"guid":"DD138833-CAC4-4283-9383-E97B7575CB2C","name":"failedAutomationCheck","type":"string"},{"guid":"BCFF9AE1-57F3-4057-9D14-4E0A81840255","name":"connectionCheck","type":"string"},{"guid":"7F49AD5F-5A98-428C-9031-0581BD947C09","name":"LogOutputList","type":"list"},{"guid":"51994DED-EFA7-4CA0-9E57-050F4938F94B","name":"EmailBody","type":"string"},{"guid":"9C0F031C-5AE2-4C71-943C-3B3E4BC30BE3","name":"EmailAPIKeysTable","type":"string"},{"guid":"05F3C8CB-2521-4A25-AA03-BB8B025EFC6D","name":"ColumnContent","type":"object"},{"guid":"85A38DC1-7562-4188-A018-D44587397A07","name":"APIKeyExpiryDate","type":"string"},{"guid":"5ADBF694-A38D-4D74-B469-43C2CF269B04","name":"APIKeyCreatedDate","type":"string"},{"guid":"3A5B907E-2445-41DD-8BF6-47C7BC91EFA4","name":"ExpiringInFormatted","type":"string"},{"guid":"F15E8A7D-D2DC-4473-9935-E5CDD53EDA96","name":"RevokedByUser","type":"string"},{"guid":"0CCE25BA-44AE-4878-A65B-224F33E3C513","name":"UserName","type":"string"},{"guid":"DF3B8C8A-38BC-4367-B79E-E10BF2F1AA83","name":"Columns","type":"list"},{"guid":"C05F3629-6DE2-43B2-98C3-3BD399451914","name":"UserEmail","type":"string"},{"guid":"99F316AA-AB2E-4A49-A218-72D3AB88859E","name":"UserAPIKeys","type":"object"},{"guid":"1ED52147-BF41-4926-B50D-29F67571EAAD","name":"OutputList","type":"list"},{"guid":"E6CF59D6-24B0-4054-B2D1-28D36E7BADFF","name":"OutputListObject","type":"object"},{"guid":"A1A64228-4BCA-4E7B-91F0-9ED8D3E94E6F","name":"UserDeleted","type":"number"},{"guid":"C02755CA-E46D-47D8-9C25-FE0692B61A14","name":"LessThanExpiry","type":"number"},{"guid":"FF10CF25-70AB-412A-BC1D-9AEEFD88D8C5","name":"ExpiringIn","type":"number"},{"guid":"80D08EAC-ABF8-44AB-B818-44E88B291A8D","name":"Now","type":"number"},{"guid":"036347CB-B1C1-495D-9A89-2BE807FB3CC5","name":"APIKeys","type":"object"},{"guid":"69691BD5-A252-41A9-9E8A-D7921EC20094","name":"emailRecipientList","type":"list"},{"guid":"06F03FC3-A265-4BAE-9310-2A4BEAD0FD00","name":"EmailTable","type":"string"},{"guid":"5FE1BE0B-FB0F-49F6-AD7C-532F0A6BC7DC","name":"created","type":"string"}]}